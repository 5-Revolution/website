import*as core from"./core.js";export*from"./core.js";let SITE_CONFIG={criticalComponents:["nav"],navigation:{autoCloseOffcanvas:!0,smoothScrolling:!0},analytics:{}};class SiteScrollAnimations{constructor(){this.lenis=null,this.initialized=!1,this.prefersReducedMotion=!1,this.config={duration:{fast:.3,normal:.5,slow:.6},ease:"power2.out",stagger:{cards:.12,list:.08,grid:.1},triggerStart:"top 85%",triggerStartEarly:"top 90%",mobileBreakpoint:768,smoothScrollMobile:!1}}init(){document.body.classList.contains("optimize")||this.initialized||(this.initialized=!0,this.prefersReducedMotion=window.matchMedia("(prefers-reduced-motion: reduce)").matches,window.matchMedia("(prefers-reduced-motion: reduce)").addEventListener("change",()=>{this.prefersReducedMotion=window.matchMedia("(prefers-reduced-motion: reduce)").matches,this.prefersReducedMotion&&this.lenis&&(this.lenis.destroy(),this.lenis=null)}),this.initLenis(),this.animateAll(),this.setupResize(),document.addEventListener("component:loaded",()=>{this.animateAll()}))}isMobile(){return window.innerWidth<this.config.mobileBreakpoint}initLenis(){this.isMobile()&&!this.config.smoothScrollMobile||this.prefersReducedMotion||"undefined"!=typeof Lenis&&(this.lenis=new Lenis({duration:1.2,easing:t=>Math.min(1,1.001-Math.pow(2,-10*t)),orientation:"vertical",gestureOrientation:"vertical",smoothWheel:!0,wheelMultiplier:1,touchMultiplier:2,infinite:!1}),gsap.ticker.add(t=>{this.lenis.raf(1e3*t)}),gsap.ticker.lagSmoothing(0))}newElements(t){return gsap.utils.toArray(t).filter(t=>!t.dataset.gsapAnimated&&(t.dataset.gsapAnimated="1",!0))}animateAll(){this.prefersReducedMotion||"undefined"!=typeof gsap&&(this.animateSectionHeaders(),this.animateCardItems(),this.animateStats(),this.animateBulletedLists(),this.animateDarkBlocks(),this.animateNumberedGrids(),this.animatePhaseCards(),this.animateFeatureBlocks(),this.animateCapabilityLists(),this.animateBlockquotes(),this.animateCTABlocks(),this.animateProductLists(),this.animateCredibilityText(),this.animateContactPage(),this.animateLeadText())}animateSectionHeaders(){this.newElements(".section-header").forEach(t=>{var e=t.querySelector("h2"),i=t.querySelector(".subheadline"),a=t.querySelector(".section-label"),n=gsap.timeline({scrollTrigger:{trigger:t,start:this.config.triggerStart,toggleActions:"play none none none"}});a&&n.to(a,{opacity:1,y:0,duration:this.config.duration.fast,ease:this.config.ease},0),e&&n.to(e,{opacity:1,y:0,duration:this.config.duration.normal,ease:this.config.ease,onStart:()=>t.classList.add("in-view")},a?.1:0),i&&n.to(i,{opacity:1,y:0,duration:this.config.duration.normal,ease:this.config.ease},a?.2:.1)})}animateCardItems(){var t=this.newElements(".card-item");if(t.length){let i=new Map;t.forEach(t=>{var e=t.closest(".row");i.has(e)||i.set(e,[]),i.get(e).push(t)}),i.forEach((t,e)=>{gsap.to(t,{opacity:1,y:0,duration:this.config.duration.normal,stagger:this.config.stagger.cards,ease:this.config.ease,scrollTrigger:{trigger:e,start:this.config.triggerStart,toggleActions:"play none none none"}})})}}animateStats(){var t,e=document.querySelector(".stats-bar");e&&!e.dataset.gsapAnimated&&(e.dataset.gsapAnimated="1",gsap.to(e,{opacity:1,scale:1,duration:this.config.duration.fast,ease:this.config.ease,scrollTrigger:{trigger:e,start:this.config.triggerStart,toggleActions:"play none none none"}}),t=e.querySelectorAll(".stat-item"),gsap.to(t,{opacity:1,y:0,duration:this.config.duration.slow,stagger:this.config.stagger.list,ease:this.config.ease,scrollTrigger:{trigger:e,start:this.config.triggerStart,toggleActions:"play none none none"}}),t.forEach(i=>{let a=i.querySelector(".stat-value");if(a){var n=a.textContent.trim().match(/^(\d+)(\+?)$/);if(n){var o=parseInt(n[1],10);let t=n[2]||"",e={value:0};gsap.to(e,{value:o,duration:1.5,ease:"power1.out",scrollTrigger:{trigger:i,start:this.config.triggerStart,toggleActions:"play none none none"},onUpdate(){a.textContent=Math.round(e.value)+t}})}}}))}animateBulletedLists(){this.newElements(".bulleted-list").forEach(t=>{var e=t.querySelectorAll("li");gsap.to(e,{opacity:1,y:0,duration:this.config.duration.fast,stagger:this.config.stagger.list,ease:this.config.ease,scrollTrigger:{trigger:t,start:this.config.triggerStart,toggleActions:"play none none none"}})})}animateDarkBlocks(){this.newElements(".dark-block").forEach(t=>{var e=t.querySelector("h2"),i=t.querySelector(".lead"),a=t.querySelector(".section-label"),n=t.querySelectorAll(".dark-block-list li"),t=gsap.timeline({scrollTrigger:{trigger:t,start:this.config.triggerStart,toggleActions:"play none none none"}});a&&t.to(a,{opacity:1,y:0,duration:this.config.duration.fast,ease:this.config.ease},0),e&&t.to(e,{opacity:1,y:0,duration:this.config.duration.normal,ease:this.config.ease},.1),i&&t.to(i,{opacity:1,y:0,duration:this.config.duration.normal,ease:this.config.ease},.2),n.length&&t.to(n,{opacity:1,y:0,duration:this.config.duration.fast,stagger:this.config.stagger.list,ease:this.config.ease},.3)})}animateNumberedGrids(){var t,e=this.newElements(".numbered-step");e.length&&(t=e[0].closest(".numbered-grid"))&&gsap.to(e,{opacity:1,y:0,duration:this.config.duration.normal,stagger:.2,ease:this.config.ease,scrollTrigger:{trigger:t,start:this.config.triggerStart,toggleActions:"play none none none"}})}animatePhaseCards(){var t,e=this.newElements(".phase-card");e.length&&(t=e[0].closest(".row"))&&gsap.to(e,{opacity:1,y:0,duration:this.config.duration.normal,stagger:this.config.stagger.cards,ease:this.config.ease,scrollTrigger:{trigger:t,start:this.config.triggerStart,toggleActions:"play none none none"}})}animateFeatureBlocks(){var t=this.newElements(".feature-block");if(t.length){let i=new Map;t.forEach(t=>{var e=t.closest(".row");i.has(e)||i.set(e,[]),i.get(e).push(t)}),i.forEach((t,e)=>{gsap.to(t,{opacity:1,y:0,duration:this.config.duration.fast,stagger:this.config.stagger.grid,ease:this.config.ease,scrollTrigger:{trigger:e,start:this.config.triggerStart,toggleActions:"play none none none"}})})}}animateCapabilityLists(){this.newElements(".capability-list").forEach(t=>{var e=t.querySelectorAll("li");gsap.to(e,{opacity:1,y:0,duration:this.config.duration.fast,stagger:.05,ease:this.config.ease,scrollTrigger:{trigger:t,start:this.config.triggerStart,toggleActions:"play none none none"}})})}animateBlockquotes(){this.newElements(".blockquote-feature").forEach(t=>{gsap.to(t,{opacity:1,y:0,duration:this.config.duration.slow,ease:this.config.ease,scrollTrigger:{trigger:t,start:this.config.triggerStart,toggleActions:"play none none none"}})})}animateCTABlocks(){this.newElements(".cta-block").forEach(t=>{var e=t.querySelector("h2"),i=t.querySelector("p"),a=t.querySelector(".btn"),t=gsap.timeline({scrollTrigger:{trigger:t,start:this.config.triggerStart,toggleActions:"play none none none"}});e&&t.to(e,{opacity:1,y:0,duration:this.config.duration.normal,ease:this.config.ease},0),i&&t.to(i,{opacity:1,y:0,duration:this.config.duration.normal,ease:this.config.ease},.1),a&&t.to(a,{opacity:1,y:0,duration:this.config.duration.normal,ease:this.config.ease},.2)})}animateProductLists(){this.newElements(".product-list").forEach(t=>{var e=t.querySelectorAll("li");gsap.to(e,{opacity:1,y:0,duration:this.config.duration.fast,stagger:.05,ease:this.config.ease,scrollTrigger:{trigger:t,start:this.config.triggerStart,toggleActions:"play none none none"}})})}animateCredibilityText(){this.newElements(".credibility-text").forEach(t=>{gsap.to(t,{opacity:1,y:0,duration:this.config.duration.normal,ease:this.config.ease,scrollTrigger:{trigger:t,start:this.config.triggerStart,toggleActions:"play none none none"}})})}animateContactPage(){var t,e=document.querySelector(".contact-form-wrapper"),e=(e&&gsap.to(e,{opacity:1,y:0,duration:this.config.duration.normal,ease:this.config.ease,scrollTrigger:{trigger:e,start:this.config.triggerStartEarly,toggleActions:"play none none none"}}),document.querySelector(".contact-info"));e&&(gsap.to(e,{opacity:1,y:0,duration:this.config.duration.normal,delay:.1,ease:this.config.ease,scrollTrigger:{trigger:e,start:this.config.triggerStartEarly,toggleActions:"play none none none"}}),(t=e.querySelectorAll(".expect-item")).length)&&gsap.to(t,{opacity:1,y:0,duration:this.config.duration.fast,stagger:this.config.stagger.list,delay:.2,ease:this.config.ease,scrollTrigger:{trigger:e,start:this.config.triggerStartEarly,toggleActions:"play none none none"}})}animateLeadText(){this.newElements(".lead:not(.hero-content .subheadline)").forEach(t=>{t.closest(".dark-block")||gsap.to(t,{opacity:1,y:0,duration:this.config.duration.normal,ease:this.config.ease,scrollTrigger:{trigger:t,start:this.config.triggerStart,toggleActions:"play none none none"}})})}setupResize(){let t;window.addEventListener("resize",()=>{clearTimeout(t),t=setTimeout(()=>{"undefined"!=typeof ScrollTrigger&&ScrollTrigger.refresh(),this.config.smoothScrollMobile||(this.isMobile()&&this.lenis?(this.lenis.destroy(),this.lenis=null):this.isMobile()||this.lenis||this.prefersReducedMotion||this.initLenis())},250)})}}function setupNavbarScroll(){let t=document.getElementById("mainNav");function e(){50<window.scrollY?t.classList.add("scrolled"):t.classList.remove("scrolled")}t&&(window.addEventListener("scroll",e,{passive:!0}),e())}let NAVBAR_ANIM_SESSION_KEY="navbar_animated",navbarAnimConfig={angularVelocity:150,staggerDelay:.2,maxRadius:29},finalAngles=[0,72,144,216,288],spiralConfig={duration:1,rotation:90},circleTravel=[270,342,54,126,198],animationOrder=[1,0,4,3,2];function setNavbarFinalState(){var t=document.getElementById("navbarBrand"),e=document.getElementById("navbarLogo"),i=document.querySelectorAll(".navbar-v-group"),a=document.querySelector(".navbar-wheel-group"),n=document.getElementById("navbarBrandText");i.length&&a&&e&&t&&(i.forEach((t,e)=>{t.setAttribute("transform",`rotate(${finalAngles[e]})`)}),a.setAttribute("transform","translate(60,60) rotate(216)"),t.style.transform="scale(1)",t.classList.add("visible"),e.classList.add("visible"),n)&&n.classList.add("visible","revealed-instant")}function playNavbarAnimation(){if(!document.body.classList.contains("optimize")&&"undefined"!=typeof gsap){var a=document.getElementById("navbarBrand"),n=document.getElementById("navbarLogo"),o=document.querySelectorAll(".navbar-v-group");let e=document.querySelector(".navbar-wheel-group"),i=document.getElementById("navbarBrandText");if(o.length&&e&&n&&a)if(sessionStorage.getItem(NAVBAR_ANIM_SESSION_KEY))setNavbarFinalState();else{a.style.transform="scale(2)",a.style.transformOrigin="left center",a.classList.add("visible"),n.classList.add("visible"),o.forEach(t=>{t.setAttribute("transform",`rotate(0) translate(0, ${navbarAnimConfig.maxRadius})`)}),i&&(i.classList.remove("revealed","revealed-instant"),i.classList.add("visible"));let l=gsap.timeline({onComplete:()=>{sessionStorage.setItem(NAVBAR_ANIM_SESSION_KEY,"true")}});o.forEach((i,t)=>{var e=animationOrder.indexOf(t)*navbarAnimConfig.staggerDelay,a=circleTravel[t],n=a/navbarAnimConfig.angularVelocity;let o=finalAngles[t],r={t:0};l.to(r,{t:1,duration:spiralConfig.duration,ease:"power1.in",onUpdate(){var t=r.t,e=t*spiralConfig.rotation,t=t*navbarAnimConfig.maxRadius,t=navbarAnimConfig.maxRadius-t;i.setAttribute("transform",`rotate(${e}) translate(0, ${t.toFixed(2)})`)}},e);t=e+spiralConfig.duration,e=spiralConfig.rotation;let s={angle:e};e+=a;l.to(s,{angle:e,duration:n,ease:"power1.out",onUpdate(){i.setAttribute("transform",`rotate(${s.angle})`)},onComplete(){i.setAttribute("transform",`rotate(${o})`)}},t)});n=Math.max(...animationOrder.map((t,e)=>{t=circleTravel[t]/navbarAnimConfig.angularVelocity;return e*navbarAnimConfig.staggerDelay+spiralConfig.duration+t}));let t={angle:0};l.to(t,{angle:216,duration:3,ease:"power2.out",onUpdate(){e.setAttribute("transform",`translate(60,60) rotate(${t.angle})`)}},n-.5),l.add(()=>{i&&i.classList.add("revealed")},n+2),l.to(a,{scale:1,duration:.8,ease:"power2.out"},n+2.8),l.play()}}}class SiteProgressiveEnhancement extends core.ProgressiveEnhancement{static setupSiteNavigation(){super.setupNavigationBehaviors()}static loadScript(a){return new Promise((t,e)=>{var i=document.createElement("script");i.src=a,i.onload=t,i.onerror=()=>e(new Error("Failed to load "+a)),document.head.appendChild(i)})}static async loadVendorLibraries(){if("undefined"==typeof gsap){try{await SiteProgressiveEnhancement.loadScript("/scripts/gsap.js"),await SiteProgressiveEnhancement.loadScript("/scripts/ScrollTrigger.js"),gsap.registerPlugin(ScrollTrigger)}catch(t){console.warn("Failed to load GSAP/ScrollTrigger:",t)}try{await SiteProgressiveEnhancement.loadScript("/scripts/lenis.js")}catch(t){console.warn("Failed to load Lenis:",t)}}}}class SiteOrchestrator extends core.ExecutionOrchestrator{constructor(){super(SITE_CONFIG),this.scrollAnimations=new SiteScrollAnimations}async init(){this.criticalExecutor.executeImmediate(),this.preloadNonCriticalCSS(),this.deferredLoader.observeNonCriticalComponents(),SiteProgressiveEnhancement.setupSiteNavigation(),document.addEventListener("component:loaded",t=>{"nav"===t.detail?.componentName&&(setupNavbarScroll(),playNavbarAnimation())}),await SiteProgressiveEnhancement.loadVendorLibraries(),playNavbarAnimation(),this.scrollAnimations.init(),await core.ProgressiveEnhancement.loadHeavyDependencies(),core.ProgressiveEnhancement.setupModalHandlers();var t="localhost"===window.location.hostname||"127.0.0.1"===window.location.hostname,e=window.location.hostname.endsWith(".nimbusedge.app");return!this.config.analytics?.gtmId||t||e||core.ProgressiveEnhancement.loadGoogleTagManager(this.config.analytics.gtmId),this}}core.ready(()=>{var t=new SiteOrchestrator;t.init(),window.executionOrchestrator=t});