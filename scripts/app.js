import*as core from"./core.js";export*from"./core.js";let SITE_CONFIG={criticalComponents:["nav"],navigation:{autoCloseOffcanvas:!0,smoothScrolling:!0},analytics:{}};class SiteScrollAnimations{constructor(){this.lenis=null,this.initialized=!1,this.prefersReducedMotion=!1,this.config={duration:{fast:.3,normal:.5,slow:.6},ease:"power2.out",stagger:{cards:.12,list:.08,grid:.1},triggerStart:"top 85%",triggerStartEarly:"top 90%",mobileBreakpoint:768,smoothScrollMobile:!1}}init(){document.body.classList.contains("optimize")||this.initialized||(this.initialized=!0,this.prefersReducedMotion=window.matchMedia("(prefers-reduced-motion: reduce)").matches,window.matchMedia("(prefers-reduced-motion: reduce)").addEventListener("change",()=>{this.prefersReducedMotion=window.matchMedia("(prefers-reduced-motion: reduce)").matches,this.prefersReducedMotion&&this.lenis&&(this.lenis.destroy(),this.lenis=null)}),this.initLenis(),this.animateAll(),this.setupResize(),document.addEventListener("component:loaded",()=>{this.animateAll()}))}isMobile(){return window.innerWidth<this.config.mobileBreakpoint}isTouchDevice(){return document.body.classList.contains("touch-device")}initLenis(){this.isTouchDevice()||this.prefersReducedMotion||"undefined"!=typeof Lenis&&(this.lenis=new Lenis({duration:1.2,easing:e=>Math.min(1,1.001-Math.pow(2,-10*e)),orientation:"vertical",gestureOrientation:"vertical",smoothWheel:!0,wheelMultiplier:1,touchMultiplier:2,infinite:!1}),this.lenis.on("scroll",ScrollTrigger.update),gsap.ticker.add(e=>{this.lenis.raf(1e3*e)}),gsap.ticker.lagSmoothing(0))}newElements(e){return gsap.utils.toArray(e).filter(e=>!e.dataset.gsapAnimated&&(e.dataset.gsapAnimated="1",!0))}animateAll(){this.prefersReducedMotion||"undefined"!=typeof gsap&&(this.animateSectionHeaders(),this.animateCardItems(),this.animateStats(),this.animateBulletedLists(),this.animateDarkBlocks(),this.animateNumberedGrids(),this.animatePhaseCards(),this.animateFeatureBlocks(),this.animateCapabilityLists(),this.animateBlockquotes(),this.animateCTABlocks(),this.animateProductLists(),this.animateCredibilityText(),this.animateContactPage(),this.animateLeadText())}animateSectionHeaders(){this.newElements(".section-header").forEach(e=>{var t=e.querySelector("h2"),i=e.querySelector(".subheadline"),a=e.querySelector(".section-label"),n=gsap.timeline({scrollTrigger:{trigger:e,start:this.config.triggerStart,toggleActions:"play none none none"}});a&&n.to(a,{opacity:1,y:0,duration:this.config.duration.fast,ease:this.config.ease},0),t&&n.to(t,{opacity:1,y:0,duration:this.config.duration.normal,ease:this.config.ease,onStart:()=>e.classList.add("in-view")},a?.1:0),i&&n.to(i,{opacity:1,y:0,duration:this.config.duration.normal,ease:this.config.ease},a?.2:.1)})}animateCardItems(){var e=this.newElements(".card-item");if(e.length){let i=new Map;e.forEach(e=>{var t=e.closest(".row");i.has(t)||i.set(t,[]),i.get(t).push(e)}),i.forEach((e,t)=>{gsap.to(e,{opacity:1,y:0,duration:this.config.duration.normal,stagger:this.config.stagger.cards,ease:this.config.ease,scrollTrigger:{trigger:t,start:this.config.triggerStart,toggleActions:"play none none none"}})})}}animateStats(){var e,t=document.querySelector(".stats-bar");t&&!t.dataset.gsapAnimated&&(t.dataset.gsapAnimated="1",gsap.to(t,{opacity:1,scale:1,duration:this.config.duration.fast,ease:this.config.ease,scrollTrigger:{trigger:t,start:this.config.triggerStart,toggleActions:"play none none none"}}),e=t.querySelectorAll(".stat-item"),gsap.to(e,{opacity:1,y:0,duration:this.config.duration.slow,stagger:this.config.stagger.list,ease:this.config.ease,scrollTrigger:{trigger:t,start:this.config.triggerStart,toggleActions:"play none none none"}}),e.forEach(i=>{let a=i.querySelector(".stat-value");if(a){var n=a.textContent.trim().match(/^(\d+)(\+?)$/);if(n){var o=parseInt(n[1],10);let e=n[2]||"",t={value:0};gsap.to(t,{value:o,duration:1.5,ease:"power1.out",scrollTrigger:{trigger:i,start:this.config.triggerStart,toggleActions:"play none none none"},onUpdate(){a.textContent=Math.round(t.value)+e}})}}}))}animateBulletedLists(){this.newElements(".bulleted-list").forEach(e=>{var t=e.querySelectorAll("li");gsap.to(t,{opacity:1,y:0,duration:this.config.duration.fast,stagger:this.config.stagger.list,ease:this.config.ease,scrollTrigger:{trigger:e,start:this.config.triggerStart,toggleActions:"play none none none"}})})}animateDarkBlocks(){this.newElements(".dark-block").forEach(e=>{var t=e.querySelector("h2"),i=e.querySelector(".lead"),a=e.querySelector(".section-label"),n=e.querySelectorAll(".dark-block-list li"),e=gsap.timeline({scrollTrigger:{trigger:e,start:this.config.triggerStart,toggleActions:"play none none none"}});a&&e.to(a,{opacity:1,y:0,duration:this.config.duration.fast,ease:this.config.ease},0),t&&e.to(t,{opacity:1,y:0,duration:this.config.duration.normal,ease:this.config.ease},.1),i&&e.to(i,{opacity:1,y:0,duration:this.config.duration.normal,ease:this.config.ease},.2),n.length&&e.to(n,{opacity:1,y:0,duration:this.config.duration.fast,stagger:this.config.stagger.list,ease:this.config.ease},.3)})}animateNumberedGrids(){var e,t=this.newElements(".numbered-step");t.length&&(e=t[0].closest(".numbered-grid"))&&gsap.to(t,{opacity:1,y:0,duration:this.config.duration.normal,stagger:.2,ease:this.config.ease,scrollTrigger:{trigger:e,start:this.config.triggerStart,toggleActions:"play none none none"}})}animatePhaseCards(){var e,t=this.newElements(".phase-card");t.length&&(e=t[0].closest(".row"))&&gsap.to(t,{opacity:1,y:0,duration:this.config.duration.normal,stagger:this.config.stagger.cards,ease:this.config.ease,scrollTrigger:{trigger:e,start:this.config.triggerStart,toggleActions:"play none none none"}})}animateFeatureBlocks(){var e=this.newElements(".feature-block");if(e.length){let i=new Map;e.forEach(e=>{var t=e.closest(".row");i.has(t)||i.set(t,[]),i.get(t).push(e)}),i.forEach((e,t)=>{gsap.to(e,{opacity:1,y:0,duration:this.config.duration.fast,stagger:this.config.stagger.grid,ease:this.config.ease,scrollTrigger:{trigger:t,start:this.config.triggerStart,toggleActions:"play none none none"}})})}}animateCapabilityLists(){this.newElements(".capability-list").forEach(e=>{var t=e.querySelectorAll("li");gsap.to(t,{opacity:1,y:0,duration:this.config.duration.fast,stagger:.05,ease:this.config.ease,scrollTrigger:{trigger:e,start:this.config.triggerStart,toggleActions:"play none none none"}})})}animateBlockquotes(){this.newElements(".blockquote-feature").forEach(e=>{gsap.to(e,{opacity:1,y:0,duration:this.config.duration.slow,ease:this.config.ease,scrollTrigger:{trigger:e,start:this.config.triggerStart,toggleActions:"play none none none"}})})}animateCTABlocks(){this.newElements(".cta-block").forEach(e=>{var t=e.querySelector("h2"),i=e.querySelector("p"),a=e.querySelector(".btn"),e=gsap.timeline({scrollTrigger:{trigger:e,start:this.config.triggerStart,toggleActions:"play none none none"}});t&&e.to(t,{opacity:1,y:0,duration:this.config.duration.normal,ease:this.config.ease},0),i&&e.to(i,{opacity:1,y:0,duration:this.config.duration.normal,ease:this.config.ease},.1),a&&e.to(a,{opacity:1,y:0,duration:this.config.duration.normal,ease:this.config.ease},.2)})}animateProductLists(){this.newElements(".product-list").forEach(e=>{var t=e.querySelectorAll("li");gsap.to(t,{opacity:1,y:0,duration:this.config.duration.fast,stagger:.05,ease:this.config.ease,scrollTrigger:{trigger:e,start:this.config.triggerStart,toggleActions:"play none none none"}})})}animateCredibilityText(){this.newElements(".credibility-text").forEach(e=>{gsap.to(e,{opacity:1,y:0,duration:this.config.duration.normal,ease:this.config.ease,scrollTrigger:{trigger:e,start:this.config.triggerStart,toggleActions:"play none none none"}})})}animateContactPage(){var e,t=document.querySelector(".contact-form-wrapper"),t=(t&&gsap.to(t,{opacity:1,y:0,duration:this.config.duration.normal,ease:this.config.ease,scrollTrigger:{trigger:t,start:this.config.triggerStartEarly,toggleActions:"play none none none"}}),document.querySelector(".contact-info"));t&&(gsap.to(t,{opacity:1,y:0,duration:this.config.duration.normal,delay:.1,ease:this.config.ease,scrollTrigger:{trigger:t,start:this.config.triggerStartEarly,toggleActions:"play none none none"}}),(e=t.querySelectorAll(".expect-item")).length)&&gsap.to(e,{opacity:1,y:0,duration:this.config.duration.fast,stagger:this.config.stagger.list,delay:.2,ease:this.config.ease,scrollTrigger:{trigger:t,start:this.config.triggerStartEarly,toggleActions:"play none none none"}})}animateLeadText(){this.newElements(".lead:not(.hero-content .subheadline)").forEach(e=>{e.closest(".dark-block")||gsap.to(e,{opacity:1,y:0,duration:this.config.duration.normal,ease:this.config.ease,scrollTrigger:{trigger:e,start:this.config.triggerStart,toggleActions:"play none none none"}})})}setupResize(){let e;window.addEventListener("resize",()=>{clearTimeout(e),e=setTimeout(()=>{"undefined"!=typeof ScrollTrigger&&ScrollTrigger.refresh(),this.isTouchDevice()?this.lenis&&(this.lenis.destroy(),this.lenis=null):this.lenis||this.prefersReducedMotion||this.initLenis()},250)})}}function setupNavbarScroll(){let e=document.getElementById("mainNav");function t(){50<window.scrollY?e.classList.add("scrolled"):e.classList.remove("scrolled")}e&&(window.addEventListener("scroll",t,{passive:!0}),t())}let NAVBAR_ANIM_SESSION_KEY="navbar_animated",navbarAnimConfig={angularVelocity:150,staggerDelay:.2,maxRadius:29},finalAngles=[0,72,144,216,288],spiralConfig={duration:1,rotation:90},circleTravel=[270,342,54,126,198],animationOrder=[1,0,4,3,2];function setNavbarFinalState(){var e=document.getElementById("navbarBrand"),t=document.getElementById("navbarLogo"),i=document.querySelectorAll(".navbar-v-group"),a=document.querySelector(".navbar-wheel-group"),n=document.getElementById("navbarBrandText");i.length&&a&&t&&e&&(i.forEach((e,t)=>{e.setAttribute("transform",`rotate(${finalAngles[t]})`)}),a.setAttribute("transform","translate(60,60) rotate(216)"),e.style.transform="scale(1)",e.classList.add("visible"),t.classList.add("visible"),n)&&n.classList.add("visible","revealed-instant")}function playNavbarAnimation(){if(!document.body.classList.contains("optimize")&&"undefined"!=typeof gsap){var a=document.getElementById("navbarBrand"),n=document.getElementById("navbarLogo"),o=document.querySelectorAll(".navbar-v-group");let t=document.querySelector(".navbar-wheel-group"),i=document.getElementById("navbarBrandText");if(o.length&&t&&n&&a)if(sessionStorage.getItem(NAVBAR_ANIM_SESSION_KEY))setNavbarFinalState();else{a.style.transform="scale(2)",a.style.transformOrigin="left center",a.classList.add("visible"),n.classList.add("visible"),o.forEach(e=>{e.setAttribute("transform",`rotate(0) translate(0, ${navbarAnimConfig.maxRadius})`)}),i&&(i.classList.remove("revealed","revealed-instant"),i.classList.add("visible"));let l=gsap.timeline({onComplete:()=>{sessionStorage.setItem(NAVBAR_ANIM_SESSION_KEY,"true")}});o.forEach((i,e)=>{var t=animationOrder.indexOf(e)*navbarAnimConfig.staggerDelay,a=circleTravel[e],n=a/navbarAnimConfig.angularVelocity;let o=finalAngles[e],r={t:0};l.to(r,{t:1,duration:spiralConfig.duration,ease:"power1.in",onUpdate(){var e=r.t,t=e*spiralConfig.rotation,e=e*navbarAnimConfig.maxRadius,e=navbarAnimConfig.maxRadius-e;i.setAttribute("transform",`rotate(${t}) translate(0, ${e.toFixed(2)})`)}},t);e=t+spiralConfig.duration,t=spiralConfig.rotation;let s={angle:t};t+=a;l.to(s,{angle:t,duration:n,ease:"power1.out",onUpdate(){i.setAttribute("transform",`rotate(${s.angle})`)},onComplete(){i.setAttribute("transform",`rotate(${o})`)}},e)});n=Math.max(...animationOrder.map((e,t)=>{e=circleTravel[e]/navbarAnimConfig.angularVelocity;return t*navbarAnimConfig.staggerDelay+spiralConfig.duration+e}));let e={angle:0};l.to(e,{angle:216,duration:3,ease:"power2.out",onUpdate(){t.setAttribute("transform",`translate(60,60) rotate(${e.angle})`)}},n-.5),l.add(()=>{i&&i.classList.add("revealed")},n+2),l.to(a,{scale:1,duration:.8,ease:"power2.out"},n+2.8),l.play()}}}class SiteProgressiveEnhancement extends core.ProgressiveEnhancement{static setupSiteNavigation(){super.setupNavigationBehaviors()}static loadScript(a){return new Promise((e,t)=>{var i=document.createElement("script");i.src=a,i.onload=e,i.onerror=()=>t(new Error("Failed to load "+a)),document.head.appendChild(i)})}static async loadVendorLibraries(){if("undefined"==typeof gsap){try{await SiteProgressiveEnhancement.loadScript("/scripts/gsap.js"),await SiteProgressiveEnhancement.loadScript("/scripts/ScrollTrigger.js"),gsap.registerPlugin(ScrollTrigger),ScrollTrigger.config({ignoreMobileResize:!0}),gsap.config({force3D:!0})}catch(e){console.warn("Failed to load GSAP/ScrollTrigger:",e)}try{await SiteProgressiveEnhancement.loadScript("/scripts/lenis.js")}catch(e){console.warn("Failed to load Lenis:",e)}}}}class SiteOrchestrator extends core.ExecutionOrchestrator{constructor(){super(SITE_CONFIG),this.scrollAnimations=new SiteScrollAnimations}async init(){0<navigator.maxTouchPoints&&document.body.classList.add("touch-device"),this.criticalExecutor.executeImmediate(),this.preloadNonCriticalCSS(),this.deferredLoader.observeNonCriticalComponents(),SiteProgressiveEnhancement.setupSiteNavigation(),document.addEventListener("component:loaded",e=>{"nav"===e.detail?.componentName&&(setupNavbarScroll(),playNavbarAnimation())}),await SiteProgressiveEnhancement.loadVendorLibraries(),playNavbarAnimation(),this.scrollAnimations.init(),await core.ProgressiveEnhancement.loadHeavyDependencies(),core.ProgressiveEnhancement.setupModalHandlers();var e="localhost"===window.location.hostname||"127.0.0.1"===window.location.hostname,t=window.location.hostname.endsWith(".nimbusedge.app");return!this.config.analytics?.gtmId||e||t||core.ProgressiveEnhancement.loadGoogleTagManager(this.config.analytics.gtmId),this}}core.ready(()=>{var e=new SiteOrchestrator;e.init(),window.executionOrchestrator=e});