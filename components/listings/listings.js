export default async function initializeListings(t){var e,r,i,n,a,o,d,l,s;"loaded"!==t.dataset.status&&({createElement:e,markLoaded:r,formatDate:i,truncateText:n,updatePicture:a,createCropConfig:o}=await import("../../../scripts/app.js"),(s=extractSource(t))?(d=(d=1<(d=[...t.children]).length?d[1]:null)?d.cloneNode(!0):null,(l=[...t.classList].filter(t=>/^(?:\d+|(?:sm|md|lg|xl|xxl)-\d+)$/.test(t)).map(t=>"col-"+t)).length||l.push("col-md-6"),t.innerHTML="",0===(s=await fetchListings(s)).length?t.appendChild(buildEmptyState(d,e)):t.appendChild(buildArticleGrid(s,l,{createElement:e,formatDate:i,truncateText:n,updatePicture:a,createCropConfig:o}))):console.error("Listings: no JSON source found"),r(t,"listings"))}function extractSource(t){var t=t.querySelector("a[href]");return(t=t&&t.getAttribute("href"))&&t.split("?")[0].endsWith(".json")?t:null}async function fetchListings(t){try{var e=await fetch(t,{headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"}});if(e.ok)return(await e.json()).data||[];throw new Error("HTTP "+e.status)}catch(t){return console.error("Listings fetch error:",t),[]}}function buildArticleGrid(t,i,n){let a=n.createElement;var e=a("div",["container"]);let o=a("div",["row","g-4"]);return t.forEach((t,e)=>{var r=a("div",i);r.appendChild(buildArticleCard(t,e,n)),o.appendChild(r)}),e.appendChild(o),e}function buildArticleCard(t,e,r){var i,{createElement:r,formatDate:n,truncateText:a,updatePicture:o,createCropConfig:d}=r,l=r("a",["article-card"],{href:t.url||"#",title:t.title||""}),s=r("div",["article-card-image"]),c=(t.image?(i=r("picture"),c=r("img",["article-card-img"],{src:t.image,alt:t.title||"",width:"600",height:"338",loading:e<2?"eager":"lazy"}),i.appendChild(c),o(i,[{width:600,media:"(min-width: 768px)"},{width:400}],{context:{isCritical:0===e},crop:d(600,338)}),s.appendChild(i)):s.innerHTML=buildPlaceholderSVG(),l.appendChild(s),r("div",["article-card-body"])),o=r("div",["article-card-meta"]),e=(t.category&&((e=r("span",["article-card-category"])).textContent=t.category,o.appendChild(e)),t.publish_date&&((d=r("span",["article-card-date"])).textContent=n(t.publish_date),o.appendChild(d)),c.appendChild(o),t.title&&((i=r("h3")).textContent=t.title,c.appendChild(i)),t.description&&((s=r("p")).textContent=a(t.description,200),c.appendChild(s)),r("span",["learn-more"]));return e.innerHTML='Read More <span class="arrow">&rarr;</span>',c.appendChild(e),l.appendChild(c),l}function buildPlaceholderSVG(){return`<svg viewBox="0 0 120 120" fill="none" xmlns="http://www.w3.org/2000/svg">
    <g transform="translate(60,60)">
      <path d="M-9,-42 L0,-16 L9,-42" stroke="#ffffff" stroke-width="4" stroke-linejoin="round" fill="none" transform="rotate(0)"/>
      <path d="M-9,-42 L0,-16 L9,-42" stroke="#ffffff" stroke-width="4" stroke-linejoin="round" fill="none" transform="rotate(72)"/>
      <path d="M-9,-42 L0,-16 L9,-42" stroke="#ffffff" stroke-width="4" stroke-linejoin="round" fill="none" transform="rotate(144)"/>
      <path d="M-9,-42 L0,-16 L9,-42" stroke="#ffffff" stroke-width="4" stroke-linejoin="round" fill="none" transform="rotate(216)"/>
      <path d="M-9,-42 L0,-16 L9,-42" stroke="#ffffff" stroke-width="4" stroke-linejoin="round" fill="none" transform="rotate(288)"/>
    </g>
  </svg>`}function buildEmptyState(t,e){var r=e("div",["container"]),i=e("div",["row","justify-content-center"]),n=e("div",["col-lg-6"]),a=e("div",["coming-soon"]);if(t)for(var o=t.querySelector(":scope > div")||t;o.firstChild;)a.appendChild(o.firstChild);else{t=e("h3"),e=(t.textContent="More Insights on the Way",e("p"));e.textContent="We're preparing our first insights on Adobe Experience Cloud architecture, migration strategies, and enterprise activation. Check back soon.",a.appendChild(t),a.appendChild(e)}return n.appendChild(a),i.appendChild(n),r.appendChild(i),r}